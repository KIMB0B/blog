---
title: 13. ë¹ˆì˜ ì¼ëŒ€ê¸°! ìƒëª… ì£¼ê¸° ì½œë°±
date: 2024-03-12T16:12:00
---
ì•ˆë…•í•˜ì„¸ìš”!

ì—¬ëŸ¬ë¶„.. ìŠ¤í”„ë§ ë¹ˆì´ ì–¸ì œ ì£½ëŠ”ë‹¤ê³  ìƒê°í•˜ì‹­ë‹ˆê¹Œ?

ì‹¬ì¥ ê¹Šìˆ™ì´ ì´ì•Œì´ ë°•í˜”ì„ ë•Œ?  
ë¶ˆì¹˜ì˜ ë³‘ì— ê±¸ë ¸ì„ ë•Œ?Â   
ë…ë²„ì„¯ìœ¼ë¡œ ë§Œë“  ìŠ¤í”„ë¥¼ ë§ˆì…¨ì„ ë•Œ?Â 

ë°”ë¡œ... ì§€ê¸ˆ ì•Œì•„ë³´ëŸ¬ ê°‘ì‹œë‹¤!

![](https://blog.kakaocdn.net/dn/1vqjg/btsFGK4SoO0/4lIxbW3gR7DmUuFAD5ZKCK/img.webp)

[[12. í•„ë“œ ì£¼ì…ì„ ë” ë” í¸í•˜ê²Œ! ë¡¬ë³µ(Lombok)|ğŸ‘‰ì´ì „ ê¸€ ë³´ëŸ¬ê°€ê¸°]]

---
# ìƒí™© ê°€ì •

ìš°ì„  ì €í¬ì˜ shopping í”„ë¡œì íŠ¸ì—ì„œë³´ë‹¨ ë”°ë¡œ ìƒí™©ì„ ê°€ì •í•´ì„œ ë§Œë“¤ì–´ë´…ì‹œë‹¤.

NetworkClientë¼ëŠ” í´ë˜ìŠ¤ê°€ ìˆê³ , ì´ë…€ì„ì€ ì„œë¹„ìŠ¤ ì‹œì‘ ì‹œ connect()ë¼ëŠ” í•¨ìˆ˜ë¥¼, ì¢…ë£Œì‹œÂ  disconnect()ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë…€ì„ì…ë‹ˆë‹¤.
URLì— ì ‘ì†í•˜ëŠ” ì¹œêµ¬ì´ê³ , ì¼ë‹¨ ìš°ì„  urlì„ ì„¤ì •í•´ì„œ ì ‘ì†í•´ë³´ëŠ” ìƒí™©ìœ¼ë¡œ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

testìª½ì— lifecycleì´ë€ íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ì–´ì£¼ê³  ê·¸ ì•ˆì— NetworkClient.javaë¥¼ ë§Œë“¤ì–´ì¤ì‹œë‹¤.

![](https://blog.kakaocdn.net/dn/bkzKZY/btsFJ4HMTxk/kSScrEo89RWYgrIprioJhk/img.png)

ê·¸ë¦¬ê³  êµ¬í˜„ì„ í•´ë´…ì‹œë‹¤. ê°ê°ì˜ ë©”ì„œë“œë“¤ì´ ì‹¤í–‰ë˜ë©´ì„œ í˜„ì¬ ì–´ë–¤ ë©”ì„œë“œê°€ ì‹¤í–‰ëœê²ƒì¸ì§€ í™•ì¸í•˜ê¸° ì¢‹ê²Œ ì¶œë ¥í•´ì¤ì‹œë‹¤.

```java
package com.naver.shopping.lifecycle;

public class NetworkClient {
    
    private String url;
    
    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    public void setUrl(String url) {
        this.url = url;
    }

    private void connect() {
        System.out.println("connect: " + url);
    }
    
    public void call(String message) {
        System.out.println("call: " + url + " message = " + message);
    }
    
    public void disconnect() {
        System.out.println("close: " + url);
    }
}
```

ìƒì„±ìë¥¼ í†µí•´ ë§Œë“¤ì–´ì§€ìë§ˆì connect()ë¡œ ì—°ê²°í•  ìˆ˜ ìˆê²Œ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

ì¶”ê°€ì ìœ¼ë¡œ LifeCycleConfig.javaë¥¼ ë§Œë“¤ì–´ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ì—ì„œ ì“¸ ìˆ˜ ìˆë„ë¡ ë¹ˆìœ¼ë¡œ ë§Œë“¤ì–´ì¤ì‹œë‹¤.

```java
package com.naver.shopping.lifecycle;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class LifeCycleConfig {

    @Bean
    public NetworkClient networkClient() {
        NetworkClient networkClient = new NetworkClient();
        networkClient.setUrl("https://www.github.com");
        return networkClient;
    }
}
```

ì´ì œ í•œë²ˆ ì˜ ì‘ë™ë˜ë‚˜ í•´ë³¼ê¹Œìš”?

lifecycle íŒ¨í‚¤ì§€ì— BeanLifeCycleTest.javaë¥¼ ë§Œë“¤ì–´ í…ŒìŠ¤íŠ¸í•´ì¤ì‹œë‹¤.

```java
package com.naver.shopping.lifecycle;

import org.junit.jupiter.api.Test;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class BeanLifeCycleTest {

    @Test
    public void lifeCycleTest() {
        ConfigurableApplicationContext ac = new AnnotationConfigApplicationContext(LifeCycleConfig.class);
        NetworkClient client = ac.getBean(NetworkClient.class);
        ac.close(); // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì•„ì˜ˆ ì¢…ë£Œí•˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ, ConfigurableApplicationContext íƒ€ì… í•„ìš”
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**

![](https://blog.kakaocdn.net/dn/OwRmu/btsFJ5s9Bom/IrG5wiZ1CGOPpVdgCoBm6k/img.png)

ì•„ë‹ˆ urlì´ ë‹¤ nullì´ ë‚˜ì˜¤ë‹¤ë‹ˆ!!!! ì‚¬ì‹¤ ë»”í•œ ì¼ì…ë‹ˆë‹¤.

```java
    @Bean
    public NetworkClient networkClient() {
        NetworkClient networkClient = new NetworkClient();
        networkClient.setUrl("https://www.github.com");
        return networkClient;
    }
```

LifeCycleConfigì—ì„œ ë³´ë©´ newë¥¼ í•´ì„œ ì´ë¯¸ ìƒì„±ìë¥¼ ì‹¤í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¼ ìƒì„±ì í˜¸ì¶œ ë‹¨ê³„ì—ì„œ urlì€ ì•„ì§ ì„¤ì •ë˜ì§€ ì•Šì•˜ê¸°ì— nullì´ ë˜ê² ì£ ? ê·¸ë¦¬ê³  ìƒì„±ì ì•ˆì— ìˆëŠ” connect()ë„ url ì£¼ì…ì„ ëª» ë°›ì€ ë‹¤ìŒ ì‹¤í–‰ë˜ì–´ì„œ nullì´ê³ , callë„ ê·¸ë ‡ìŠµë‹ˆë‹¤.

ì´ì¯¤ë˜ë©´ ìŠ¬ìŠ¬ ì–´ë–¤ìˆœì„œë¡œ ìŠ¤í”„ë§ì´ ì‘ì—…ì„ ì§„í–‰í•˜ëŠ”ì§€ í—·ê°ˆë¦¬ì‹¤ê²ë‹ˆë‹¤. ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë²¤íŠ¸ ë¼ì´í”„ì‚¬ì´í´ì…ë‹ˆë‹¤.

> **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±** ğŸ’¨ **ìŠ¤í”„ë§ ë¹ˆ ìƒì„±** ğŸ’¨ **ì˜ì¡´ê´€ê³„ ì£¼ì…** ğŸ’¨ **ì´ˆê¸°í™” ì½œë°±** ğŸ’¨ **ì‚¬ìš©** ğŸ’¨ **ì†Œë©¸ì „ ì½œë°±** ğŸ’¨ **ìŠ¤í”„ë§ ì¢…ë£Œ**

ì €í¬ëŠ” ì—¬ê¸°ì„œ ì´ˆê¸°í™” ì½œë°±, ì†Œë©¸ì „ ì½œë°±ìœ¼ë¡œ í•´ë‹¹ ë¶€ë¶„ì— ì‘ì—…ì„ ì‹œí‚¤ë©´ì„œ ìœ„ì™€ ê°™ì€ ë¬¸ì œë¥¼ í•´ê²°í•´ë³´ë ¤ í•©ë‹ˆë‹¤.

---
# ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œ ì§€ì •

ì´ˆê¸°í™”ì™€ ì†Œë©¸í•  ë•Œ ì‚¬ìš©í•  ë©”ì„œë“œë¥¼ ì €í¬ê°€ ë§Œë“  ë©”ì„œë“œë“¤ ì¤‘ì—ì„œ ì§ì ‘ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €í¬ëŠ” connect, disconnectì˜€ì£ ? í•œë²ˆ í•´ë´…ì‹œë‹¤.

ìš°ì„  ìƒì„±ìì—ì„œ connect()ì™€ call() ê°™ì´ ì‹œì‘í•˜ìë§ˆì í•  ì‘ì—…ë“¤ì„ ì§€ì›Œì¤ì‹œë‹¤.
ê·¸ í›„ init()ì´ë¼ëŠ” ì•„ì˜ˆ ì´ˆê¸°í™” ì½œë°± ë‹¨ê³„ì— ì§„í–‰í•  ì‘ì—…ë“¤ì„ ë„£ì€ ë©”ì„œë“œë¥¼ ë§Œë“¤ê³ , close()ë¼ëŠ” ì†Œë©¸ì „ ì½œë°± ë‹¨ê³„ì— ì§„í–‰í•  ì‘ì—…ë“¤ì„ ë„£ì€ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì¤ì‹œë‹¤.

```java
package com.naver.shopping.lifecycle;

public class NetworkClient {

    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    private void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message = " + message);
    }

    public void disconnect() {
        System.out.println("close: " + url);
    }

    public void init() {
        System.out.println("==Open NetworkClient Start==");
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
        System.out.println("==Open NetworkClient End==");
    }

    public void close() {
        System.out.println("==Close NetworkClient Start==");
        disconnect();
        System.out.println("==Close NetworkClient End==");
    }
}
```

ê·¸ í›„ LifeCycleConfigì—ì„œ @Beanë¶€ë¶„ì—Â **initMethod, destroyMethod**ë¥¼ ì¶”ê°€í•´ì¤ì‹œë‹¤.

ê·¸ë¦¬ê³  ë™ì¼í•œ í…ŒìŠ¤íŠ¸ë¥¼ ëŒë ¤ë´…ì‹œë‹¤.

**ì‹¤í–‰ ê²°ê³¼**

![](https://blog.kakaocdn.net/dn/IZrwV/btsFHn9qtPU/eBg6WklYLHZDDi5e1lH9t1/img.png)

newë¥¼ í†µí•´ ìƒì„±ìê°€ ì‹¤í–‰ë  ë•ŒëŠ” urlì´ nullì´ì§€ë§Œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë‹¨ê³„ì—ì„œ setUrlì´ ë¨¼ì € ì§„í–‰ì´ ë˜ê³  ê·¸ ì´í›„ ìƒì„±ì ì½œë°±ì´ ì§„í–‰ë˜ë©´ì„œ connect()ì™€ call()ì—ì„œ urlì´ ì˜ ë‚˜ì˜¤ê³  ìˆëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  ac.close()ë¥¼ í•´ì„œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œí•˜ë©° ìë™ìœ¼ë¡œ ì†Œë©¸ì ê¸°ëŠ¥ë„ ì‹¤í–‰ë˜ëŠ” ê²ƒë„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---
# @PostConstructì™€ @PreDestroy

ì–˜ë“¤ì€ ì„¤ì • í´ë˜ìŠ¤ì—ì„œ ì„¤ì •ì„ í•´ ì£¼ëŠ”ê²Œ ì•„ë‹ˆì–´ì„œ LifeCycleConfigë¥¼ ì›ë˜ëŒ€ë¡œ ëŒë ¤ì¤ì‹œë‹¤.

```java
package com.naver.shopping.lifecycle;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class LifeCycleConfig {

    @Bean
    public NetworkClient networkClient() {
        NetworkClient networkClient = new NetworkClient();
        networkClient.setUrl("https://www.github.com");
        return networkClient;
    }
}
```

ì´ ì–´ë…¸í…Œì´ì…˜ì€ ë°”ë¡œ ìš°ë¦¬ê°€ ë§Œë“  NetworkClientì— ì§ì ‘ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. ë°”ë¡œ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

```java
package com.naver.shopping.lifecycle;

import jakarta.annotation.PostConstruct;
import jakarta.annotation.PreDestroy;

public class NetworkClient {

    ...

    @PostConstruct
    public void init() {
        System.out.println("==Open NetworkClient Start==");
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
        System.out.println("==Open NetworkClient End==");
    }

    @PreDestroy
    public void close() {
        System.out.println("==Close NetworkClient Start==");
        disconnect();
        System.out.println("==Close NetworkClient End==");
    }
}
```

ê°„ë‹¨í•˜ì£ ? ì„¤ëª…ì´ í¬ê²Œ í•„ìš”í•˜ì§„ ì•Šì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì‹¤í–‰ê²°ê³¼ë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.

**ì‹¤í–‰ ê²°ê³¼**

![](https://blog.kakaocdn.net/dn/VBiP0/btsFIxxbJUA/CIktKhE892YOt5OO1t1WUK/img.png)

ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

# ë‘ ë°©ë²• ì¤‘ ì–´ë–¤ ê±¸ ì¨ì•¼í• ê¹Œ?

ë‘˜ ë‹¤ ì“°ê¸° ì¢‹ì•„ë³´ì´ëŠ”ë° ì–´ë–¤ê±¸ ì“°ë©´ ì¢‹ì„ê¹Œìš”? ìƒí™©ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤.

## 1. ì™¸ë¶€ì—ì„œ ë°›ì€ í´ë˜ìŠ¤ë¥¼ ì“°ëŠ” ê²½ìš°

ì™¸ë¶€ í´ë˜ìŠ¤ëŠ” ì €í¬ê°€ ìˆ˜ì •ì„ ëª»í•˜ì£ . ì´ ì½”ë“œì•ˆì— @PostConstructê°™ì€ ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•˜ì§€ ëª»í•˜ë‹ˆ ì €í¬ê°€ ì„¤ì •í•  ì„¤ì • í´ë˜ìŠ¤ì—ì„œ @Beanì— initMethod, destroyMethodë¥¼ ë„£ì–´ì£¼ëŠ” ë°©ë²•ì´ ìˆ˜ì›”í• ê²ƒì…ë‹ˆë‹¤.

## 2. ë‚´ê°€ ë§Œë“  í´ë˜ìŠ¤ë¥¼ ì“°ëŠ” ê²½ìš°

ë‚´ê°€ ë§Œë“  í´ë˜ìŠ¤ëŠ” ì¤‘ê°„ì— ì–´ë…¸í…Œì´ì…˜ ììœ ë¡­ê²Œ ë„£ì„ ìˆ˜ ìˆê² ì£ ? @Beanì— ë©”ì„œë“œ ì´ë¦„ì„ stringìœ¼ë¡œ ë„£ì–´ì£¼ë©´ ì»´íŒŒì¼ì´ ì¡ì§€ ëª»í•˜ëŠ” ì—ëŸ¬ê°€ ë‚˜ì˜¬ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì— @PostConstruct, @PreDestroyë¥¼ ì‚¬ìš©í•´ì¤ì‹œë‹¤.

---
# ë§ˆì¹˜ë©°

ì´ì œ ìŠ¬ìŠ¬ ìŠ¤í”„ë§ì˜ ê¸°ë³¸ ê¸°ëŠ¥ì„ ë°°ì›Œë³´ëŠ” ê³¼ì •ì´ ëì´ ë‹¤ê°€ì˜¤ê³  ìˆìŠµë‹ˆë‹¤!

ê·¸ë ‡ë‹¤ê³  ì•„ì˜ˆ ëì€ ì•„ë‹ˆê¸´ í•˜ì£ . [[Model-View-Controller(MVC)|MVCíŒ¨í„´]]ì— ëŒ€í•´ì„œë„ ë°°ìš°ë©´ì„œ APIë„ ë§Œë“¤ì–´ì„œ ì§„ì •í•œ ê°œë°œìë¡œ ê±°ë“­ë‚˜ë´…ì‹œë‹¤!!!

ì˜¤ëŠ˜ ì‘ì—…í•œ ì½”ë“œ ë‚´ìš©ì€ ì•„ë˜ ì»¤ë°‹ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.


[Learn Bean's Lifecycle Â· KIMB0B/blog_spring@e837854 (github.com)](https://github.com/KIMB0B/blog_spring/commit/e837854da4f6d6c13415246560c02a839f4d5c66)

[[14. ë¹ˆì˜ ë²”ìœ„ë¥¼ ì •í•´ì£¼ì! ë¹ˆ ìŠ¤ì½”í”„ (Bean Scope)|ğŸ‘‰ë‹¤ìŒ ê¸€ ë³´ëŸ¬ê°€ê¸°]]